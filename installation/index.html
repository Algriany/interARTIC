<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Installation - InterARTIC Documentation</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">InterARTIC Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">Installation</a>
                            </li>
                            <li class="navitem">
                                <a href="../usage/" class="nav-link">Usage</a>
                            </li>
                            <li class="navitem">
                                <a href="../troubleshooting/" class="nav-link">Troubleshooting</a>
                            </li>
                            <li class="navitem">
                                <a href="../snakeballing/" class="nav-link">Software Packaging</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                            <li class="nav-item">
                                <a rel="prev" href=".." class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../usage/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#installation-from-source" class="nav-link">Installation from Source</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#dependencies" class="nav-link">Dependencies</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#opening-terminal" class="nav-link">Opening terminal</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#installing-python-and-pip" class="nav-link">Installing Python and pip</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#installing-python-packages-for-redis-celery-and-flask" class="nav-link">Installing Python packages for Redis, Celery and Flask</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#installing-the-artic-pipeline-environment" class="nav-link">Installing the ARTIC pipeline environment</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#installing-interartic" class="nav-link">Installing interARTIC</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#installing-the-redis-server" class="nav-link">Installing the Redis Server</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#launching-interartic" class="nav-link">Launching interARTIC</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#launching-interartic-web-interface" class="nav-link">Launching interARTIC web interface</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="installation-from-source">Installation from Source</h1>
<div class="toc">
<ul>
<li><a href="#installation-from-source">Installation from Source</a><ul>
<li><a href="#dependencies">Dependencies</a></li>
<li><a href="#opening-terminal">Opening terminal</a></li>
<li><a href="#installing-python-and-pip">Installing Python and pip</a><ul>
<li><a href="#linux-users-distributions-supporting-apt">Linux users (distributions supporting apt)</a></li>
<li><a href="#other-operating-system-users">Other operating system users</a></li>
</ul>
</li>
<li><a href="#installing-python-packages-for-redis-celery-and-flask">Installing Python packages for Redis, Celery and Flask</a></li>
<li><a href="#installing-the-artic-pipeline-environment">Installing the ARTIC pipeline environment</a><ul>
<li><a href="#trouble-installing-artic">Trouble installing Artic?</a></li>
</ul>
</li>
<li><a href="#installing-interartic">Installing interARTIC</a></li>
<li><a href="#installing-the-redis-server">Installing the Redis Server</a></li>
<li><a href="#launching-interartic">Launching interARTIC</a><ul>
<li><a href="#automatic-launch">Automatic launch</a></li>
<li><a href="#manual-launch">Manual launch</a></li>
<li><a href="#job-concurrency">Job Concurrency</a></li>
</ul>
</li>
<li><a href="#launching-interartic-web-interface">Launching interARTIC web interface</a></li>
</ul>
</li>
</ul>
</div>
<p>This page has the instructions to build interARTIC from the source, which is tedious. If your system is a common Linux distribution (including Windows Subsystem for Linux), follow steps <a href="https://github.com/Psy-Fer/interARTIC#quick-start">here</a> to easily install interARTIC using pre-compiled binaries.</p>
<h2 id="dependencies">Dependencies</h2>
<ul>
<li>Python 3.7 or above</li>
<li>Celery v4.4.6 (cliffs)</li>
<li>Redis Server v6.0.5</li>
<li>Artic 1.2.1 (Miniconda required for Artic installation)</li>
</ul>
<h2 id="opening-terminal">Opening terminal</h2>
<p>Your operating system's command line will be used to install the dependencies and start interARTIC.</p>
<ul>
<li>For Mac OS: Type “terminal” into your spotlight search, then hit Return.</li>
<li>For Windows: Type “Ubuntu” into your search bar in the Start menu, then hit Enter (you need to have an Ubuntu distribution installed via Windows Subsystem for Linux. See <a href="https://linuxhint.com/install_ubuntu_windows_10_wsl/">here</a> for steps.</li>
<li>For Linux: Enter the keyboard shortcut: Ctrl+Alt+T.</li>
</ul>
<p>If these instructions don't work on your operating system, google how to open command line on your operating system and software version.</p>
<h2 id="installing-python-and-pip">Installing Python and pip</h2>
<p>In order to use interARTIC, you’ll need Python and its package manager pip installed on your system. Python and associated libraries has limited compatibility across different versions and thus we recommend using a Python 3.7 virtual environment.</p>
<h3 id="linux-users-distributions-supporting-apt">Linux users (distributions supporting apt)</h3>
<p>If you are a Linux user using a distribution that supports <code>apt</code>, you may follow the commands below to install Python 3.7:</p>
<pre><code>sudo add-apt-repository ppa:deadsnakes/ppa
sudo apt-get update
sudo apt install python3.7 python3.7-dev python3.7-venv
</code></pre>
<p>Now create a Python virtual environment called interARTIC-venv, activate it and upgrade pip:</p>
<pre><code>python3.7 -m venv interARTIC-venv
source interARTIC-venv/bin/activate
pip install --upgrade pip
</code></pre>
<h3 id="other-operating-system-users">Other operating system users</h3>
<p>Check if Python and Pip are already installed by entering the following into your command prompt:</p>
<pre><code>python --version    # or this can be python3 --version
pip --version       # or this can be pip3 --version
</code></pre>
<p>If Python is not installed, follow <a href="https://www.python.org/downloads/">this link</a> and follow the instructions there.</p>
<ul>
<li>This application uses Python3 as the default, not Python2.</li>
</ul>
<p>If you have just installed Python, it will likely have also installed pip. Check that it is installed.</p>
<pre><code>pip --version
</code></pre>
<p>If pip is not installed, follow <a href="https://pip.pypa.io/en/stable/installing/">this link</a> and follow the prompts there.</p>
<p>Now create a Python virtual environment called interARTIC-venv, activate it and upgrade pip:</p>
<pre><code>python -m venv interARTIC-venv
source interARTIC-venv/bin/activate
pip install --upgrade pip
</code></pre>
<h2 id="installing-python-packages-for-redis-celery-and-flask">Installing Python packages for Redis, Celery and Flask</h2>
<p>To install the Python packages for Redis, Celery, Flask and Pandas enter the following into your command prompt (make sure you have activated the interARTIC-venv virtual environment created above):</p>
<pre><code>pip install celery==4.4.6 redis==3.5.3 flask==1.1.2 pandas==1.2.4
</code></pre>
<h2 id="installing-the-artic-pipeline-environment">Installing the ARTIC pipeline environment</h2>
<p>The ARTIC pipeline has to be installed via conda.</p>
<p>If you do not have conda installed, we suggest installing miniconda.
The miniconda installation guide can be found <a href="https://docs.conda.io/en/latest/miniconda.html">here</a>
We suggest you undergo the 'Regular Installation' process.</p>
<p>After installing conda, enter the following into your command prompt to install ARTIC:</p>
<pre><code>git clone https://github.com/artic-network/artic-ncov2019.git
cd artic-ncov2019 &amp;&amp; git checkout 7e359dae37d894b40ae7e35c3582f14244ef4d36
conda env remove -n artic-ncov2019
conda env create -f environment.yml
</code></pre>
<p>Conda will download half of the Internet (pun intended!) so wait patiently.
After installation completes, run the following command and verify artic is installed.</p>
<pre><code>conda activate artic-ncov2019
artic --version
conda deactivate
</code></pre>
<h3 id="trouble-installing-artic">Trouble installing Artic?</h3>
<p>Follow <a href="https://artic.readthedocs.io/en/latest/installation/">this link</a> to access the documentation for installing Artic.</p>
<h2 id="installing-interartic">Installing interARTIC</h2>
<p>Clone the repository from github by entering the following commands into your terminal.</p>
<pre><code>git clone https://github.com/tthnguyen11/interARTIC.git
cd interARTIC 
</code></pre>
<h2 id="installing-the-redis-server">Installing the Redis Server</h2>
<p>To locally build the redis server and do a test launch, enter the following into your command prompt in your interARTIC base folder:</p>
<pre><code>./run-redis.sh 7777
</code></pre>
<p>Exit the redis server by pressing ctrl+c now. Now close the terminal.</p>
<p>Alternatively, you can follow <a href="https://redis.io/topics/quickstart">this link</a> to install the Redis Server manually.</p>
<h2 id="launching-interartic">Launching interARTIC</h2>
<p>Now launch a new terminal and go inside the interARTIC-venv virtual environment we created above by calling <code>source interARTIC-venv/bin/activate</code>.  interARTIC can be launched by running the provided <code>run-dev.sh</code> script (see Automatic launch below). If something goes wrong, follow the steps under Manual launch below. </p>
<h3 id="automatic-launch">Automatic launch</h3>
<p>To start interARTIC, navigate to the directory where the interARTIC repository was cloned and enter the following command into your command prompt:</p>
<pre><code>./run-dev.sh
</code></pre>
<h3 id="manual-launch">Manual launch</h3>
<ol>
<li>Take a new terminal, and run redis on port 7777.</li>
</ol>
<pre><code>cd interARTIC
./run-redis.sh 7777
</code></pre>
<ol>
<li>Take another new terminal, activate the interARTIC-venv virtual environment we created above and run interARTIC main script.</li>
</ol>
<pre><code>source interARTIC-venv/bin/activate
cd interARTIC
python3 main.py 7777
</code></pre>
<ol>
<li>Take another new terminal, activate the interARTIC-venv virtual environment followed by the ARTIC conda environment and run celery.</li>
</ol>
<pre><code>source interARTIC-venv/bin/activate
cd interARTIC
conda activate artic-ncov2019; celery worker -A main.celery -b redis://localhost:7777/0 --result-backend redis://localhost:7777/0 --concurrency=1 --loglevel=info
</code></pre>
<h3 id="job-concurrency">Job Concurrency</h3>
<p>By default, job concurrency is turned off and the automatic and manual launchs will allow one job to be run at a time.</p>
<p>If you wish to <strong>turn concurrency on</strong> and run multiple jobs at a time, then please follow the steps under Manual launch above except that now you should not pass <code>--concurrency=1</code> to celery.</p>
<h2 id="launching-interartic-web-interface">Launching interARTIC web interface</h2>
<p>Navigate to your browser and follow <a href="http://127.0.0.1:5000">this link</a> to access interARTIC.</p>
<!--
On any text editor, open ```config.init```. Update each of the configurations as necessary. All inputs should be file paths. More information about this can be found in the next section.

<!--
The default config folder is as below:


<pre><code>{
    &quot;data-folder&quot;: &quot;/data&quot;,
    &quot;sample-barcode-csvs&quot;: &quot;/data/sample-barcodes&quot;,
    &quot;eden-primer-scheme-folder&quot;: &quot;/data/primer_schemes_eden&quot;,
    &quot;eden-scheme-name&quot;: &quot;nCoV-2019/V1&quot;,
    &quot;artic-primer-scheme-folder&quot;: &quot;/data/primer_schemes&quot;,
    &quot;artic-scheme-name&quot;: &quot;nCoV-2019/V1&quot;
}
</code></pre>


* **data-folder**: This is the folder where all your data is located. By default, it is set to "/data"
* **sample-barcode-csvs**: This is the folder where your csv containing barcode names is placed.
* **eden-primer-scheme-folder**: This is the folder containing, for example, the folder nCoV-2019 which contains the V1, V2, etc folders.
* **eden-scheme-name**: This is the name of the eden primer scheme being used for your nanopore sequencing run.
* **artic-primer-scheme-folder**: This is the folder containing, for example, the folder nCoV-2019 which contains the V1, V2, etc folders.
* **artic-scheme-name**: This is the name of the artic primer scheme being used for your nanopore sequencing run.

After you update your config file, close main.py and rerun it as below:


<pre><code>CTRL + C
python3 main.py
</code></pre>



####  File path input

* Folders and files should be inputted by their file paths.
* File paths can be retrieved by running 'pwd' in the appropriate folder on any terminal.
* Folders may also be referred to as directories.
* File paths should start with “/” (Mac or Linux) or “C:\” (Windows). If you have not worked with navigating folders and files in the terminal before, take a look at this [resource](https://www.earthdatascience.org/courses/intro-to-earth-data-science/python-code-fundamentals/work-with-files-directories-paths-in-python/).

For example:


<pre><code>$ pwd                                    # get file path of current directory
/Users/YOURNAME
$ ls                                     # list contents of current directory
folder1     folder2     file1       documents
$ cd documents                           # change current directory to documents
$ pwd
/Users/YOURNAME/documents
$ cd outputFolder                         # change current directory to your output folder

$ pwd                                    # obtain file path you will input into interARTIC
/Users/YOURNAME/documents/outputFolder
</code></pre>

Note: your input folder may not be located in documents folder. Simply navigate, using these commands, to inside your input folder and obtain the file path.
--></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>

        <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
